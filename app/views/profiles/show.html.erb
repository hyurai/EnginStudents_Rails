<h1>EnginStudents</h1>
<div class = "main_contents">
  <div class = "side_contents">
  <% if user_signed_in?%>
    <h2><%= link_to 'ログアウト',destroy_user_session_path,method: :delete%></h2>
    <h2><a class = "side_content" href = "/profiles/<%= current_user.id%>">Mypage</a></h2>
    <h2><a class = "side_content js-modal-open" href = "" data-target = "modal01">投稿</a></h2>
    <h2><a class = "side_content"href = "/tweets/new">検索</a></h2>
    <h2><a class = "side_content"href = "/">いいね一覧</a></h2>
    <h2><a class = "side_content"href = "/logo">Logo</a></h2>
    <div id="modal01" class="c-modal js-modal">
      <div class="c-modal_bg js-modal-close"></div>
      <div class="c-modal_content _lg">
        <div class="c-modal_content_inner">
          <a class="js-modal-close c-modal_close" href=""><span>閉じる</span></a>
          <form action = "/tweets" method = "post">
            <div style = " display: flex;flex-direction: column;">
              <input type = "hidden" name = "user_id" value = "<%= current_user.id%>">
              <div style = "display:flex;width:100%;">
                <h5>インターンの題名</h5>
                <input type = "text" name = "title" class = "side_content_input">
              </div>
              <div style = "display:flex;width: 100%;">
                <h5>会社の名前</h5>
                <input type = "text" name = "company_name" placeholer = "会社の名前" class = "side_content_input">
              </div>
              <div style = "display:flex;width: 100%;">
                  <h5>エンジニアの種類</h5>
                  <input type = "text" name = "job" placeholer = "種類" class = "side_content_input">
              </div>
              <div style = "display:flex;width: 100%;">
                <h5>細かい情報</h5>
                <input type = "text" name= "text" class = "side_content_input">
              </div>
              <div style = "display:flex;width:100%;">
                <h5 style = "padding-right: 20px;">日程</h5>
                <div style = "display:flex;flex-direction: column;width:70%;">
                  <h6 style = "margin: 0px;">エントリー日</h6>
                  <input type = "date" name = "entry_date" class = "side_content_input">
                  <h6 style = "margin: 0px;">就業開始日</h6>
                  <input type = "date" name = "start_date" class = "side_content_input">
                  <h6 style = "margin: 0px;">就業最終日</h6>
                  <input type = "date" name = "end_date" class = "side_content_input">
                </div>
              </div>
              <div style = "width:100%;display:flex">
                <div style = "width:75%;"></div>
                <input type = "submit" value = "投稿" style = "width:13%;">
              </div>
            </div>
          </form>
        </div>
      </div>
    </div>
  <% else %>
    <h2><a class = "side_content" href = "/users/sign_up">サインアップ</a></h2>
    <h2><a class = "side_content"href = "/users/sign_in">ログインをする</a></h2>
  <% end %>
  </div>
    <div class = "tweet_contents">
      <div class = "my_profile" style = "display:flex;">
        <div class = "backend_img" style = "width:500px;height:500px;">
          <img src = "<%= @profile.back_img%>" style = "width:100%;height:100%;">
        </div>
        <div class = "front_infs" style = "display:flex;flex-flow: column;">
          <div class = "front_inf" style = "display:flex;">
            <div class = "front_img" style = "width:100px;height:100px;">
              <img src = "<%= @profile.front_img%>" style = "width:100%;height:100%; border-radius: 50%;">
            </div>
              <p><%= @profile.user.name%></p>
              <% if current_user.id == @profile.user_id%>
                <a class = "side_content js-modal-open" href = "" data-target = "modal-profile">編集</a>
              <% end %>
          </div>
          <div class = "text_inf" style = "display:flex;flex-flow: column;">
            <p>URL</p>
            <p><%= @profile.url%></p>
            <p>一言コメント</p>
            <p><%= @profile.one_word_comment %></p>
          </div>
        </div>
        
      </div>
    </div>
  

    
    <div id="modal-profile" class="c-modal-profile js-modal-profile">
    <div class="c-modal_bg-profile js-modal-close-profile"></div>
    <div class="c-modal_content-profile _lg">
        <div class="c-modal_content_inner-profile">
            <a class="js-modal-close-profile c-modal_close-profile" href=""><span>閉じる</span></a>
            <form action = "/profiles/<%= @profile.id%>" method = "post" enctype="multipart/form-data">
              <div style = "display:flex;">
                <label><input type="file" name="back_img" accept="image/*" id = "myImage" style = "display:none;"><img src = "<%= @profile.back_img%>" id = "back_preview" style = "height:250px;width:200px;"></label>
                <div style = "display:flex;flex-flow: column;">
                  <label><input type="file" name="front_img" accept="image/*" id = "myFrontImage" style = "display:none;"><img src = "<%= @profile.front_img%>" id = "front_preview" style = "height:100px;width:100px; border-radius: 50%;"></label>
                  <input type = "text" name = "url" value = "<%= @profile.url%>">
                  <input type = "text" name = "one_word_comment" value = "<%= @profile.one_word_comment%>">
                </div>
              </div>
              <input type = "submit" value = "編集">
            </form>
        </div>
    </div>
  </div>
</div>
<script>
  $(document).ready(function(){
    $('#myImage').on('change',function(e){
      var reader = new FileReader();
      reader.onload = function(e){
        $('#back_preview').attr('src',e.target.result);
      }
      reader.readAsDataURL(e.target.files[0]);
    });
    $('#myFrontImage').on('change',function(e){
      var reader = new FileReader();
      reader.onload = function(e){
        $('#front_preview').attr('src',e.target.result);
      }
      reader.readAsDataURL(e.target.files[0]);
    });
  });
</script>